## create-react-app(cra)

- 리액트 개발 환경을 직접 구축하려면 많은 지식과 노력이 필요
    - webpack, babel, jest, eslint, polyfill(오래된 브라우저 지원), HMR(수정 시 바로 적용), CSS 후처리 등
- 페이스북에서 관리하는 공식 툴

next.js로 시작하는 경우도 많은데 cra와 차이는 서버 사이드 렌더링 지원 여부다.

CRA도 하려면 할 수는 있는데 깔끔하게 할 방법이 없음, 서버 사이드 렌더링이 필수인 프로젝트라면 Next.js가 필수라고 생각함

CRA의 단점 중 하나가 빌드 시스템이나 eslint 등의 설정을 거의 변경할 수 없다는 점이 있음

이거 설정 변경이 필요하다면 Next.js로 하는게 좋다. 

빨리 만들거나 백오피스용이라면 CRA 사용하는게 좋다.

react-scripts - cra의 버전업은 이 스크립츠의 버전업이 되는 것

browserslist: 지원 브라우저에 대한 내용, 0.2%라고 써 있는건 0.2%의 점유율을 가진 브라우저에 대해 지원을 하겠다는 것

serviceWorker - PWA라는 기능을 사용하려고 있는 것, 처음에는 unregister로 동작이 안되는 상태인데 register로 변경하면 돌아감,

css를 import해서 사용하면 자동으로 반영이 됨

css나 이미지도 자바스크립트 import 방식을 사용하는데 이렇게 사용하면 경로에 해시값이 들어가서 브라우저 캐싱을 효율적으로 활용할 수 있음

이미지 내용이 변경되면 이 해시값도 변경이 됨

이미지 뿐만 아니라 데이터를 다룰때 json 파일도 사용할 수 있는데 이것도 import해서 쓸 수 있음

import를 쓸 때 좋은 점이 필요할 때만 데이터를 불러오게끔 만들 수 있음, 데이터를 동적으로 받아오게 import를 할 수 있음(이렇게 하면 네트워크 상에서 기본적으로 가져오는게 아니고 데이터를 요청하면 그 때 받아오게 처리할 수 있음)

### cra의 4가지 명령어

- start: 개발모드로 실행할 때 사용, 여러가지 최적화가 적용이 안된 상태로 실행이 되므로 배포할 때 사용하면 안됨
    
    기본적으로 http로 실행이 된다. https로 실행하고 싶다면 (HTTPS=true npm start)라고 하면 된다.
    
    window에서는 set HTTPS=true && npm start
    

- build: 배포할 때 사용, 정적 파일 생성
    
    별도로 서버에 애플리케이션을 실행하지 않으므로 서버 사이드 렌더링으로 동작할 수 없는 것.
    
    이미지 파일의 경우 사이즈에 따라 빌드 시 저장되는 경로가 달라진다. 큰 사이즈는 media 폴더 안에 저장이 되고 작은 사이즈는 자바스크립트 파일 안에 내장이 된다. 내장을 하는 이유는 HTTP 요청 횟수를 줄이는 데에 있음. 빠르게 이미지를 보여줄 수도 있고 HTTP 2.0 이후에는 성능 차이는 크게 없음.
    
- npm test
    
    .test 파일이 있음
    
    .specs.js 로 만들어도 테스트 파일로 인식됨
    
    _tests__ 라는 폴더를 만들면 그 안의 파일들은 다 테스트 파일로 인식을 함
    

- eject
    
    모든 설정 파일을 추출함, 직접 개발환경을 구축하고 싶을 때 사용.
    
    polyfill: 오래된 브라우저 지원
    
    core-js를 많이 사용함
    
    index.js에서 import 해서 사용 가능.
    

- 환경변수
    
    개발, 테스트, 배포 환경별로 다른 값을 적용할 때 유용함
    
    process.env.{변수 이름} 이런 식으로 사용
    
    process.env.NODE_ENV
    
    npm start -> development
    
    npm run build -> production
    
    npm test -> test